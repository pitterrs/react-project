const Search = function (H) {

    const Search = function (element) {
        var self = this;

        self.$e = H.logEl(element, 'Search: ');
        self.$pe = H.logEl(element.parentElement, '|- Parent Element');

    }

    Search.selector = '.uxf-search-bar';

    Search.prototype = {

        currentSearchValue: function () {
            if ($(this.$e).val().length > 0) {
                $(this.$e).addClass('active');
            } else {
                $(this.$e).removeClass('active');
            }
        },

        clearSearch: function (e) {
            e.preventDefault();
            $(this.$pe).parent().find('.uxf-search-bar').val('').removeClass('active').focus();
        }
    }

    H.Search = function (a) {
        return new Search(H.elementOrId(a));
    }

    H.Register.Search = function (e) {
        H.registerEvents(Search.selector, 'keyup', Search, 'currentSearchValue', e);
        H.registerEvents('.uxf-search .uxf-search-bar-clear-icon', 'click', Search, 'clearSearch', e);
    }

    H.defaultRegister(H.Register.Search);

};

module.exports = Search;
