//
// Standard Dropdown Styling
//
.dropdown {
    .btn-link {
        text-decoration: underline;
    }
}

.dropdown-menu {
    border: $uxf-dropdown-border;
    box-shadow: $uxf-dropdown-box-shadow;
}

// Wanted to do display:flex; align-items: center; for dropdown icon so
// that it would be centered but there is currently a bug with Safari
// that prevents this with <button>
// DO: Check back if Safari has fixed the bug
.dropdown-toggle {
    padding-right: $uxf-dropdown-toggle-padding-right;

    &::after {
        @include uxf-dropdown-toggle-icon;
    }

    &:hover::after {
        background-image: $uxf-dropdown-toggle-icon-gray;
    }
}

.dropdown-toggle.btn-secondary,
.dropdown-toggle.btn-primary {
    &::after {
        background-image: $uxf-dropdown-toggle-icon-gray;
    }
}

.uxf-header-title .dropdown-toggle {
    &::after {
        @include uxf-dropdown-toggle-icon($uxf-header-title-dropdown-toggle-icon-height, $uxf-header-title-dropdown-toggle-icon-width, $uxf-header-title-dropdown-toggle-icon-bg-size);
        left: $uxf-header-title-dropdown-toggle-left;
    }

    &:hover::after {
        background-image: $uxf-dropdown-toggle-icon-gray;
    }
}

.dropdown-toggle:disabled::after,
.dropdown-toggle.disabled::after  {
    background-image: $uxf-dropdown-toggle-icon-disabled;
}

.dropdown-item {
    border-left: $uxf-dropdown-item-border-left;
    margin-bottom: $uxf-dropdown-item-margin-bottom;
    padding-bottom: $uxf-dropdown-item-padding-bottom;
    padding-top: $uxf-dropdown-item-padding-top;
    text-decoration: none;

    @include uxf-list-item-interation-states;

    @media (min-width: $uxf-screen-md) {
        box-shadow: none;
        font-weight: $font-weight-normal;
    }
}

.uxf-top-nav .dropdown-menu {
    background: $uxf-top-nav-dropdown-menu-bg;
    margin-top: $uxf-top-nav-dropdown-menu-margin-top;
    min-width: $uxf-top-nav-dropdown-menu-min-width;
    padding-bottom: $uxf-top-nav-dropdown-menu-padding-bottom;
    padding-top: $uxf-top-nav-dropdown-menu-padding-top;
    top: $uxf-top-nav-dropdown-menu-top;

    .dropdown-item {
        box-shadow: $uxf-border-bottom-1px;
        font-weight: $font-weight-bold;
        margin-bottom: $uxf-top-nav-dropdown-item-margin-bottom;
        padding: $uxf-top-nav-dropdown-item-padding;

        @media (min-width: $uxf-screen-md) {
            box-shadow: $uxf-top-nav-dropdown-item-box-shadow-md;
            font-weight: $font-weight-normal;
            margin-bottom: $uxf-top-nav-dropdown-item-margin-bottom-md;
            padding: $uxf-top-nav-dropdown-item-padding-md;
        }
    }
}

//
// UXF Megamenu
// DO: Finish QA and refactoring of SCSS
//

.dropdown-menu.uxf-expanded-menu {
    box-shadow: $uxf-dropdown-box-shadow, 6px 1px 8px -2px rgba(97, 6, 6, .05);
}

.uxf-top-nav .dropdown-menu.uxf-expanded-menu {
    border-bottom-right-radius: 0;
    border-right: none;
    border-top-right-radius: 0;
    margin-bottom: -.0625rem;
    padding-bottom: 11rem;
}

.uxf-top-nav .dropdown > .dropdown-toggle,
.uxf-parent-menu-item > .dropdown-item,
.uxf-parent-menu-item > .uxf-submenu-link {
    position: relative;

    &::after {
        background: $uxf-dropdown-toggle-icon-gray no-repeat;
        background-size: contain;
        border: none;
        content: '';
        height: 1.75rem;
        left: initial;
        position: absolute;
        right: .875rem;
        top: 1rem;
        transform: rotate(-90deg);
        width: 1.75rem;

        @media (min-width: $uxf-screen-md) {
            height: 1.125rem;
            right: 0;
            top: .8125rem;
            transform: rotate(0deg);
            width: 1.5rem;
        }
    }
}

.uxf-parent-menu-item > .dropdown-item,
.uxf-parent-menu-item > .uxf-submenu-link {
    padding: 1rem;

    &::after {
        right: 1rem;
        top: 1.0625rem;

        @media (min-width: $uxf-screen-md) {
            display: none;
        }
    }
}

.uxf-parent-menu-item > .uxf-submenu-link {
    @media (min-width: $uxf-screen-md) {
        cursor: default;
        padding: 0 0 0 .25rem;
        pointer-events: none;
        text-decoration: none;
    }
}

.uxf-child-menu-items {
    background: $gray-100;
    border: 1px solid $gray-600;
    border-left: none;
    border-top: none;
    box-shadow: 1px 1px 8px rgba(0, 0, 0, .07);
    height: 100%;
    left: calc(100% - .0625rem);
    padding: 1.25rem;
    position: absolute;
    top: 0;
    transition: width .5s;
}

.uxf-parent-menu-item {
    .dropdown-item {
        position: relative;
        z-index: 1;

        &.active {
            &:hover,
            &:focus {
                background-color: $uxf-nav-active-link-hover-bg;
            }
        }
    }
}

.uxf-expanded-menu .uxf-parent-menu-item {
    .dropdown-item {
        &.active {
            &:hover,
            &:focus {
                background-color: $uxf-nav-link-hover-bg;
            }
        }
    }
}

.uxf-submenu-item {
    background: $gray-100;
    border-bottom: $uxf-gray-border;
    border-bottom-right-radius: $border-radius;
    border-right: $uxf-gray-border;
    border-top: $uxf-gray-border;
    border-top-right-radius: $border-radius;
    box-shadow: 4px 2px 8px -4px $uxf-box-shadow-color, 1px 5px 8px -4px $uxf-box-shadow-color, 0 -5px 8px -6px $uxf-box-shadow-color;
    display: none;
    flex-wrap: wrap;
    height: calc(100% + .125rem);
    left: calc(100% - .0625rem);
    padding: 1.25rem;
    position: absolute;
    top: -1px;

    &.active {
        display: flex;
        overflow-y: scroll;
    }
}

.uxf-submenu-footer {
    width: 100%;

    @media (min-width: $uxf-screen-md) {
        bottom: 0;
        padding: .25rem;
        padding-bottom: 1.5rem;
        right: 0;
        text-align: right;
        width: 100%;
    }

    @media (min-width: $uxf-screen-lg) {
        bottom: 1.25rem;
        padding-bottom: .25rem;
        position: absolute;
        right: 1.25rem;
    }

    .btn {
        bottom: 1.5rem;
        position: absolute;
        right: 1.5rem;

        @media (min-width: $uxf-screen-md) {
            bottom: 0;
            position: relative;
            right: 0;
        }
    }
}

.uxf-submenu-column {
    width: 100%;

    @media (min-width: $uxf-screen-md) {
        margin-bottom: 1.25rem;
        width: 50%;
    }

    @media (min-width: $uxf-screen-lg) {
        width: 25%;
    }

    h5 {
        @media (min-width: $uxf-screen-md) {
            margin-bottom: 0;
        }

        @media (min-width: $uxf-screen-lg) {
            padding-left: .25rem;
            padding-right: .25rem;
        }
    }

    .list-unstyled {
        display: flex;
        flex-direction: column;

        @media (min-width: $uxf-screen-md) {
            border: none;
            box-shadow: none;
            left: 0;
            padding: .25rem;
            position: relative;
            width: auto;
        }
    }
}

.uxf-submenu-link {
    border-left: $uxf-dropdown-item-border-left;
    box-shadow: none;
    display: inline-block;
    font-size: $font-size-lg;
    font-weight: $font-weight-bold;
    margin-bottom: 0;
    padding: .5rem 1rem;
    text-decoration: none;
    width: 100%;

    svg {
        height: $uxf-icon-md;
        width: $uxf-icon-md;
    }

    &:hover,
    &:focus,
    &:active {
        background: $uxf-dropdown-item-hover-bg;
        border-left: $uxf-dropdown-item-hover-border-left;
        text-decoration: none;
    }

    @media (min-width: $uxf-screen-md) {
        border-left: none;
        box-shadow: none;
        color: $primary;
        font-size: $font-size-base;
        font-weight: $font-weight-normal;
        padding: .25rem;

        &:hover,
        &:focus,
        &:active {
            background: transparent;
            border-left: none;
            color: $dropdown-link-hover-color;
            text-decoration: underline;
        }
    }
}

.uxf-submenu-view-all {
    display: none;

    @media (min-width: $uxf-screen-md) {
        display: block;
    }
}

.uxf-submenu-view-all ~ .uxf-submenu-link {
    @media (min-width: $uxf-screen-md) {
        display: none;
    }
}

.uxf-back-link {
    align-items: center;
    background-color: $gray-100;
    box-shadow: $uxf-border-bottom-1px;
    display: flex;
    font-size: 1.125rem;
    font-weight: $font-weight-bold;
    margin-bottom: 1px;
    padding-bottom: .75rem;
    padding-left: .25rem;
    padding-top: .75rem;
    text-decoration: none;
    width: 100%;

    svg {
        fill: $dropdown-toggle-color;
        height: $uxf-icon-md;
        width: $uxf-icon-md;
    }

    &:hover,
    &:focus {
        text-decoration: none;

        svg {
            fill: $gray-1100;
        }
    }

    @media (min-width: $uxf-screen-md) {
        display: none;
    }

    &.btn-link {
        text-decoration: none;
    }
}

.uxf-submenu-item.open {
    display: flex;
}

//
// Updated Mobile Menu that is compatible with future megamenu update
//

@media (max-width: $uxf-screen-md - 1) {
    .uxf-top-nav .uxf-submenu-item,
    .uxf-top-nav .dropdown-menu,
    .uxf-top-nav .navbar-nav {
        background: $white;
        border-right: 0;
        display: none;
        font-family: JDSansPro-Bold;
        height: 100%;
        left: 0;
        overflow-x: hidden;
        overflow-y: auto;
        position: absolute;
        top: 0;
        width: 100%;
        z-index: 2;
    }

    .uxf-top-nav .dropdown > .dropdown-toggle,
    .navbar-nav > .nav-item > .nav-link,
    .uxf-parent-menu-item > .dropdown-item,
    .uxf-parent-menu-item > .uxf-submenu-link {
        box-shadow: $uxf-border-bottom-1px;
        color: $gray-1100;
        font-size: $font-size-lg;
    }

    .uxf-parent-menu-item > .uxf-submenu-link  {
        margin-bottom: 1px;
    }

    .uxf-top-nav .dropdown-menu {
        box-shadow: none;
        margin-top: 0;
        padding-bottom: .75rem;
        padding-left: 0;
        padding-top: 0;
        top: 0;
    }

    .dropdown-menu.show,
    .uxf-top-nav .navbar-collapse.show .navbar-nav,
    .uxf-parent-menu-item > .uxf-submenu-item.open {
        display: block;
    }

    .dropdown {
        position: static;
    }

    .uxf-top-nav .uxf-submenu-item {
        border: none;
        box-shadow: none;
        padding: 0;
    }

    .uxf-top-nav .uxf-submenu-item.open {
        .uxf-submenu-link:last-child {
            margin-bottom: 1.25rem;
        }
    }

    .uxf-submenu-link h5 {
        color: $gray-1100;
        font-size: $font-size-lg;
        font-weight: $font-weight-bold;
        line-height: $line-height-sm;
        margin-bottom: 0;
    }

    .uxf-submenu-footer .btn {
        border: none;
        border-left: $uxf-dropdown-item-border-left;
        bottom: inherit;
        box-shadow: $uxf-border-bottom-1px;
        color: $gray-1100;
        display: inline-block;
        font-size: $font-size-lg;
        font-weight: $font-weight-bold;
        margin-bottom: .0625rem;
        padding: 1rem;
        position: relative;
        right: inherit;
        text-align: left;
        text-decoration: none;
        transition: none;
        width: 100%;

        &:hover,
        &:focus,
        &:not(:disabled):not(.disabled):active {
            background: $uxf-dropdown-item-hover-bg;
            border-left: $uxf-dropdown-item-hover-border-left;
            box-shadow: $uxf-border-bottom-1px;
            color: $dropdown-link-hover-color;
            text-decoration: none;
        }

        @media (min-width: $uxf-screen-md) {
            box-shadow: none;
        }
    }
}

.uxf-submenu-link.uxf-submenu-link-header {
    align-items: center;
    color: $gray-1100;
    display: flex;
    font-size: 1.25rem;
    font-weight: $font-weight-bold;
    margin-bottom: 0;
    margin-top: .5rem;

    svg {
        fill: $gray-1100;
    }

    @media (min-width: $uxf-screen-md) {
        display: none;
    }
}

//
// Dropdown Menu Notifications
// DO: QA notifications within navbar and confirm with design
//

.dropdown-menu.dropdown-menu-notifications {
    border-color: $gray-400;
    box-shadow: 0 0 4px $gray-400;
    max-width: 20rem;
    padding: 0;

    h6 {
        border-bottom: 2px solid $uxf-green-construction-yellow;
        font-size: 1.125rem;
        font-weight: bold;
        margin-bottom: 0;
        padding: .8125rem 1.125rem .625rem;
    }

    .dropdown-item {
        align-items: center;
        border-bottom: $uxf-gray-border;
        border-left: none;
        display: flex;
        font-size: $font-size-sm;
        height: 100%;
        padding: 1rem 1rem 1rem .5rem;
        white-space: normal;
        width: 19.875rem;

        &:hover,
        &:focus,
        &.active {
            border-left: none;
        }

        svg {
            flex-shrink: 0;
            height: 100%;
            margin-left: .625rem;
            margin-right: .625rem;
            width: 1.875rem;
        }

        &:last-child {
            border-bottom: none;
        }
    }

    @media (max-width: $uxf-screen-md - 1) {
        box-shadow: none;
        padding-left: 0;

        .dropdown-item {
            min-width: 100%;
        }
    }
}

.uxf-top-nav .dropdown:hover > .dropdown-menu.dropdown-menu-notifications {
    display: none;
}

.uxf-top-nav .dropdown:hover > .dropdown-menu.dropdown-menu-notifications.show {
    display: block;
}

