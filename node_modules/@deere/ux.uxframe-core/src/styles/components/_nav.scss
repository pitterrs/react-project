.uxf-top-nav .navbar-nav {
    width: 100%;
}

.uxf-header + .uxf-top-nav {
    margin-top: $uxf-top-nav-margin-top;
}

.uxf-top-nav {
    font-family: $uxf-font-family-decorative;

    &.navbar {
        background: $white;
        border-bottom: $uxf-gray-border;
        padding: $uxf-top-nav-padding;

        @media (min-width: $uxf-screen-sm) {
            border-bottom: none;
        }

        @media (min-width: $uxf-screen-md) {
            border-bottom: $uxf-gray-border;
        }
    }

    .navbar-nav .nav-link {
        font-weight: $font-weight-bold;
        padding: $uxf-nav-link-padding;
        text-decoration: none;

        &.dropdown-toggle {
            padding-right: $uxf-nav-link-dropdown-toggle-padding-right;
        }

        &.uxf-back-link {
            padding: $uxf-back-link-padding;
            color: $uxf-green-charcoal;
        }

        &:hover,
        &:focus {
            background: $uxf-nav-link-hover-bg;
        }

        @media (min-width: $uxf-screen-md) {
            border-bottom: $uxf-nav-border-transparent;
            font-weight: $font-weight-base;
            padding: $uxf-nav-link-padding-md;
        }
    }

    .nav-icon {
        border-bottom: $uxf-nav-border-transparent;
        text-decoration: none;

        @media (min-width: $uxf-screen-md) {
            padding: $uxf-nav-icon-padding-md;

            &:hover,
            &:focus {
                background: $uxf-nav-link-hover-bg;
            }
        }
    }

    .nav-item.active {
        .nav-icon {
            border-bottom: $uxf-nav-border-left;
        }

        .nav-home-icon {
            fill: $uxf-nav-home-icon-fill;
        }
    }

    @media (min-width: $uxf-screen-md) {
        .nav-item.active {
            > .nav-link {
                border-bottom: $uxf-nav-border-left;
            }
        }
    }

    .nav-home-icon {
        height: $uxf-nav-home-icon-size;
        position: relative;
        top: -.25rem;
        width: $uxf-nav-home-icon-size;

        @media (min-width: $uxf-screen-md) {
            top: .5625rem;
        }
    }

    .dropdown-item {
        padding: $uxf-nav-dropdown-item-padding;
    }

    .dropdown-menu {
        padding: 0;
        z-index: $zindex-menu;
    }

    .dropdown-toggle::before {
        @media (min-width: $uxf-screen-md) {
            bottom: -.5rem;
            content: '';
            height: 100%;
            left: 0;
            position: absolute;
            width: 100%;
        }
    }

    .navbar-collapse {
        height: auto !important;                /* stylelint-disable-line declaration-no-important */
        -webkit-overflow-scrolling: touch;
        overflow-x: visible;

        @media (min-width: $uxf-screen-md) {
            margin-left: $uxf-nav-collapse-margin-left-md;
        }

        @media (min-width: $uxf-screen-lg) {
            margin-left: $uxf-nav-collapse-margin-left-lg;
        }

        @media (min-width: $uxf-screen-xl) {
            margin-left: $uxf-nav-collapse-margin-left-xl;
        }
    }

    + main {
        margin: $uxf-nav-main-margin;
        padding-bottom: $uxf-nav-main-padding-bottom;

        @media (min-width: $uxf-screen-md) {
            padding-bottom: $uxf-nav-main-padding-bottom-md;
            padding-left: $uxf-nav-main-padding-left-md;
        }

        @media (min-width: $uxf-screen-lg) {
            padding: $uxf-nav-main-padding-lg;
        }

        @media (min-width: $uxf-screen-xl) {
            padding: $uxf-nav-main-padding-xl;
        }
    }

    .navbar-nav .uxf-nav-widget {
        border: none;
        display: inline-block;
        padding: $uxf-nav-widget-padding;
        position: relative;
        text-decoration: none;

        svg {
            height: $uxf-icon-md;
            width: $uxf-icon-md;
        }

        &:hover,
        &:focus {
            background: transparent;
        }

        &:focus {
            z-index: $uxf-nav-widget-z-index-focus;
        }

        @media (min-width: $uxf-screen-md) {
            align-items: center;
            display: flex;
            padding: $uxf-nav-widget-padding-md;

            &:hover,
            &:focus {
                background: $uxf-nav-widget-hover-bg;
            }
        }
    }
}

.uxf-nav-item-widget {
    @media (min-width: $uxf-screen-md) {
        margin-left: $uxf-nav-item-widget-margin-left;
    }

    + .uxf-nav-item-widget {
        @media (min-width: $uxf-screen-md) {
            margin-left: 0;
        }
    }
}

.uxf-header-unbranded + .navbar .navbar-collapse {
    margin-left: $uxf-header-unbranded-nav-collapse-margin-left;
}

.uxf-header-unbranded + .uxf-top-nav .uxf-nav-title {
    display: none;
}

.uxf-nav-title {
    font-family: $uxf-font-family-decorative;
    font-size: $h4-font-size;
    margin: $uxf-nav-title-margin;
    padding: $uxf-nav-title-padding;
    text-align: left;

    a {
        text-decoration: none;

        &:hover,
        &:focus {
            text-decoration: underline;
        }
    }

    @media (min-width: $uxf-screen-sm) {
        display: none;
    }
}

@media (max-width: $uxf-screen-md - 1) {
    .uxf-top-nav .dropdown-menu {
        border: none;
    }

    .navbar-collapse {
        background: $white;
        bottom: 0;
        height: 100%;
        margin: $uxf-nav-collapse-margin-sm;
        overflow-y: auto;
        padding: $uxf-nav-collapse-padding-sm;
        position: fixed;
        right: 0;
        top: 0;
        transform: translateX(100%);
        transition: transform .3s;
        width: $uxf-nav-collapse-width-sm;
        z-index: $zindex-menu;

        &.collapsing {
            transition: transform .12s;
        }

        &.in {
            margin-right: 0;
        }

        &.show {
            margin-right: 0;
            transform: translateX(0%);
        }
    }

    .navbar-nav > li,
    .navbar-nav > .nav-item {
        border-bottom: $uxf-gray-border;
    }

    .uxf-link-text {
        border-bottom: none;
        display: inline-block;
        position: relative;
    }

    .nav-item.active {
        .uxf-link-text {
            border-bottom: $uxf-nav-border-left;
        }
    }

    .uxf-nav-item-widget {
        padding: $uxf-nav-item-widget-padding;
    }

    .uxf-nav-item-icon {
        padding: $uxf-nav-item-icon-padding;
    }
}

.uxf-nav-back {
    padding: $uxf-nav-back-padding;
    text-align: $uxf-nav-back-text-align;

    .navbar-back {
        position: relative;
        z-index: $uxf-nav-back-z-index;
    }

    @media (min-width: $uxf-screen-md) {
        display: none;
    }
}

.navbar-toggler,
.mobile-search {
    display: block;

    @media (min-width: $uxf-screen-md) {
        display: none;
    }
}

.navbar-back {
    fill: $dropdown-toggle-color;
    margin: $uxf-navbar-back-margin;
    padding: $uxf-navbar-back-padding;

    > svg {
        fill: $uxf-icon-fill;
    }

    &:hover,
    &:focus {
        > svg {
            fill: $uxf-icon-fill-hover;
        }
    }
}

@media (min-width: $uxf-screen-md) {
    .uxf-top-nav .dropdown > .dropdown-menu {
        display: block;
        opacity: 0;
        pointer-events: none;
        transition: $uxf-top-nav-dropdown-menu-transition;
        visibility: hidden;
    }

    .uxf-top-nav .dropdown:hover > .dropdown-menu,
    .uxf-top-nav .dropdown > .dropdown-menu.show  {
        display: block;
        opacity: 1;
        pointer-events: auto;
        visibility: visible;
    }
}

// Navigation - Side

.uxf-side-nav {
    display: none;
    max-width: $uxf-side-nav-max-width;
    padding: $uxf-side-nav-padding;

    @media (min-width: $uxf-screen-md) {
        display: block;
    }

    @media (min-width: $uxf-screen-lg) {
        margin: $uxf-side-nav-margin;
    }

    > .nav {
        > .nav-item {
            box-shadow: $uxf-border-top-1px;
        }

        > .nav-item:first-child {
            box-shadow: none;
        }

        > .nav-item.active-parent > .nav-link {
            &.active {
                background: $gray-100;

                &:hover,
                &:focus {
                    background: $gray-200;
                }
            }
        }
    }

    .nav-link {
        padding: $uxf-side-nav-link-padding;
    }

    .nav-item {
        &:first-of-type {
            .nav-link {
                border-top: none;
                box-shadow: none;
            }
        }
    }

    > .nav .nav {
        background: $uxf-side-nav-subnav-bg;

        .nav-item .nav-link {
            box-shadow: none;
            font-size: $font-size-sm;
            padding: $uxf-side-nav-subnav-link-padding;

            &:hover,
            &:focus {
                background: $uxf-side-nav-subnav-link-hover-bg;
            }

            &.active {
                background: $uxf-side-nav-subnav-active-link-bg;
                border-left: $uxf-nav-border-left;

                &:hover,
                &:focus {
                    background: $uxf-side-nav-subnav-active-link-hover-bg;
                }
            }
        }
    }

    .nav.card {
        background: $white;

        > .nav-item {
            &:first-of-type {
                > .nav-link {
                    border-top-left-radius: $border-radius;
                    border-top-right-radius: $border-radius;
                }
            }

            &:last-of-type {
                > .nav-link {
                    border-bottom-right-radius: $border-radius;
                    border-bottom-left-radius: $border-radius;
                }
            }
        }

        .nav {
            background: $white;

            .nav-item .nav-link {
                &:hover,
                &:focus {
                    background: $gray-100;
                }

                &.active {
                    background: $gray-100;
                    border-left: $uxf-nav-border-left;

                    &:hover,
                    &:focus {
                        background: $gray-200;
                    }
                }
            }
        }

        > .nav-item.active-parent > .nav-link {
            &.active {
                background: $white;

                &:hover,
                &:focus {
                    background: $gray-100;
                }
            }
        }
    }

    .active-parent {
        > .nav-link {
            background: $uxf-side-nav-parent-subnav-active-bg;
            border-left: $uxf-nav-border-left;

            &:hover,
            &:focus {
                background: $uxf-side-nav-parent-subnav-hover-bg;
                border-color: $uxf-green-construction-yellow;
            }
        }
    }

    &.uxf-side-nav-collapsed {
        li > .nav{
            display: none;
        }

        li.active-parent > .nav,
        li.active > .nav {
            display: block;
        }
    }
}

// Nav - Top and Nav - Side Shared Styling

.uxf-top-nav .navbar-nav .nav-link,
.uxf-side-nav .nav-link  {
    color: $uxf-nav-link-color;

    &:hover,
    &:focus {
        color: $black;
    }
}

.uxf-top-nav .dropdown-item,
.uxf-side-nav .nav-link {
    border-left: $uxf-nav-border-transparent;
    text-decoration: none;

    &:hover,
    &:focus {
        background: $uxf-nav-link-hover-bg;
        border-left: $uxf-nav-border-left-hover;
        color: $black;
    }

    &.active {
        background: $uxf-nav-active-link-bg;
        border-left: $uxf-nav-border-left;

        &:hover,
        &:focus {
            background: $uxf-nav-active-link-hover-bg;
        }
    }
}

.uxf-top-nav .dropdown-menu:not(.uxf-expanded-menu) .dropdown-item {
    @media (min-width: $uxf-screen-md) {
        &:active {
            background-color: $uxf-dropdown-item--active-bg;
            border-color: $uxf-dropdown-item--active-border-color;
            color: $uxf-dropdown-item--active-color;
        }
    }
}
